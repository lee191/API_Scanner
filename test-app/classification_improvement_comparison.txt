# API ë¶„ë¥˜ ë¡œì§ ê°œì„  ê²°ê³¼ ë¹„êµ
# Generated: 2025-10-16 12:47
# Scan ID: e8164e56-bc79-49be-abc6-3c5bc5347cda

================================================================================
ìš”ì•½
================================================================================

ê°œì„  ì „ (Simple Source-Based Logic):
  - ë¶„ë¥˜ ê¸°ì¤€: source í•„ë“œë§Œ í™•ì¸ (documentation/openapi/swagger)
  - ë¡œì§: if source not in ['documentation', 'openapi', 'swagger']: Shadow API
  - ë¬¸ì œì :
    * URL íŒ¨í„´ ë¬´ì‹œ (/internal, /admin, /debug ë“±)
    * HTTP ë©”ì„œë“œ ë¬´ì‹œ (DELETE, PUT on sensitive paths)
    * ì‘ë‹µ ì½”ë“œ ë¬´ì‹œ (401/403 on admin paths)
    * ëª¨ë“  JavaScript ë°œê²¬ ì—”ë“œí¬ì¸íŠ¸ê°€ Shadowë¡œ ë¶„ë¥˜ë¨

ê°œì„  í›„ (Multi-Criteria Intelligent Classification):
  - ë¶„ë¥˜ ê¸°ì¤€: 6ë‹¨ê³„ ë‹¤ì¤‘ ê¸°ì¤€ ë¶„ì„
  - Shadow APIs: 50ê°œ (87.7%)
  - Public APIs: 7ê°œ (12.3%)
  - ë¶„ë¥˜ ì •í™•ë„: ë†’ì€ ë³´ì•ˆ ì¤‘ì‹¬ ì ‘ê·¼

================================================================================
âœ… ì ìš©ëœ ê°œì„ ì‚¬í•­
================================================================================

1. âœ… ë‹¤ì¤‘ íŒ¨í„´ ê¸°ë°˜ ë¶„ë¥˜ ì‹œìŠ¤í…œ
   ìœ„ì¹˜: src/utils/api_classifier.py (ì‹ ê·œ ìƒì„±)

   Shadow API íŒ¨í„´ (13ê°œ):
   - /api/internal/, /internal/
   - /api/admin/, /admin/
   - /api/debug/, /debug/
   - /api/private/, /private/
   - /backup/, /config, /console
   - /execute, /exec
   - /_* (ì–¸ë”ìŠ¤ì½”ì–´ ì ‘ë‘ì‚¬)
   - /.well-known/ (ìˆ¨ê²¨ì§„ ê²½ë¡œ)

   Public API íŒ¨í„´ (9ê°œ):
   - /api/v\d+/auth/ (ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸)
   - /api/v\d+/users (ì‚¬ìš©ì ëª©ë¡)
   - /api/v\d+/products (ì œí’ˆ API)
   - /api/v\d+/search (ê²€ìƒ‰ API)
   - /api/v\d+/posts (ê²Œì‹œë¬¼ API)
   - /login, /register, /signup (ê³µê°œ ì¸ì¦)

2. âœ… HTTP ë©”ì„œë“œ ê¸°ë°˜ ë¯¼ê° ì‘ì—… íƒì§€
   ìœ„ì¹˜: src/utils/api_classifier.py:56-60

   ë¯¼ê° ì‘ì—…:
   - DELETE: /users/, /admin/, /config, /database, /backup
   - PUT: /admin/, /config, /settings, /roles, /permissions
   - POST: /execute, /exec, /eval, /upload, /backup, /restore

   ê²°ê³¼: ì¼ë°˜ì ì¸ Public API íŒ¨í„´ì´ì–´ë„ ë¯¼ê° ì‘ì—…ì´ë©´ Shadowë¡œ ë¶„ë¥˜

3. âœ… ì‘ë‹µ ê¸°ë°˜ ë¶„ë¥˜
   ìœ„ì¹˜: src/utils/api_classifier.py:136-156

   ê¸°ëŠ¥:
   - 401/403 + admin/internal ê²½ë¡œ = Shadow API
   - ì‘ë‹µ ë‚´ìš©ì— ë¯¼ê° í‚¤ì›Œë“œ í¬í•¨ = Shadow API
     (password, api_key, secret, token, credential, ssn ë“±)

4. âœ… ë³´ìˆ˜ì  ê¸°ë³¸ ì •ì±…
   ìœ„ì¹˜: src/utils/api_classifier.py:104-106

   ì •ì±…: ëª…í™•í•œ Public ì§€í‘œê°€ ì—†ìœ¼ë©´ Shadowë¡œ ë¶„ë¥˜
   ì´ìœ : ë³´ì•ˆ ìŠ¤ìºë„ˆëŠ” False Negativeë³´ë‹¤ False Positiveê°€ ì•ˆì „í•¨

5. âœ… ë¶„ë¥˜ ì´ìœ  ì„¤ëª… ê¸°ëŠ¥
   ìœ„ì¹˜: src/utils/api_classifier.py:159-196

   ê¸°ëŠ¥: get_classification_reason() ë©”ì„œë“œë¡œ ë¶„ë¥˜ ê·¼ê±° í™•ì¸ ê°€ëŠ¥

================================================================================
ğŸ“Š ìƒì„¸ ë¶„ë¥˜ ê²°ê³¼ ë¶„ì„
================================================================================

Public APIs (7ê°œ, 12.3%):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. âœ… GET  /api/v1/users                   (200 OK)
   ë¶„ë¥˜ ê·¼ê±°: /api/v\d+/users íŒ¨í„´ ë§¤ì¹­

2. âœ… GET  /api/v1/products                (404)
   ë¶„ë¥˜ ê·¼ê±°: /api/v\d+/products íŒ¨í„´ ë§¤ì¹­

3. âœ… GET  /api/v1/search?q=:query         (200 OK)
   ë¶„ë¥˜ ê·¼ê±°: /api/v\d+/search íŒ¨í„´ ë§¤ì¹­

4. âœ… POST /api/v1/products                (404)
   ë¶„ë¥˜ ê·¼ê±°: /api/v\d+/products íŒ¨í„´ ë§¤ì¹­

5. âœ… POST /api/v1/auth/login              (401)
   ë¶„ë¥˜ ê·¼ê±°: /api/v\d+/auth/ íŒ¨í„´ ë§¤ì¹­

6. âœ… POST /login                          (200 OK)
   ë¶„ë¥˜ ê·¼ê±°: /login íŒ¨í„´ ë§¤ì¹­

7. âœ… POST /register                       (200 OK)
   ë¶„ë¥˜ ê·¼ê±°: /register íŒ¨í„´ ë§¤ì¹­


Shadow APIs (50ê°œ, 87.7%):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

A. /api/internal/* ê²½ë¡œ (29ê°œ) - ì •í™•í•œ Shadow API ë¶„ë¥˜:
   âœ… GET  /api/internal/admin/users       (200 OK) - ì‹¤ì œ Shadow API
   âœ… GET  /api/internal/debug/config      (200 OK) - ì‹¤ì œ Shadow API
   âœ… GET  /api/internal/stats             (404)
   âœ… POST /api/internal/exec              (400) - ë§¤ìš° ìœ„í—˜í•œ ì—”ë“œí¬ì¸íŠ¸
   âœ… POST /api/internal/backup/database   (405)
   âœ… POST /api/internal/backup/create     (404)
   âœ… POST /api/internal/cache/clear       (404)
   âœ… POST /api/internal/db/query          (404)
   ... ë“± 29ê°œ ëª¨ë‘ ì˜¬ë°”ë¥¸ ë¶„ë¥˜

B. ë¯¼ê° ì‘ì—… ê°ì§€ (9ê°œ):
   âœ… DELETE /users/:id                    (404) - DELETE on /users/
   âœ… PUT /users/:id                       (404) - PUT on sensitive path
   âœ… PUT /api/internal/admin/config       (404) - PUT on /admin/
   âœ… POST /api/v1/upload                  (400) - POST to /upload
   âœ… POST /api/v1/user/delete             (404) - DELETE ì‘ì—…
   âœ… POST /reset-password                 (404) - ë¹„ë°€ë²ˆí˜¸ ê´€ë ¨
   âœ… POST /payments                       (404) - ê²°ì œ ê´€ë ¨
   ... ë“±

C. ëª…í™•í•œ íŒ¨í„´ ì—†ëŠ” ì—”ë“œí¬ì¸íŠ¸ (12ê°œ):
   âš ï¸  GET  /api/v1/user/:id               (404) - ë³´ìˆ˜ì  ë¶„ë¥˜
   âš ï¸  GET  /api/v1/secure/data            (404) - "secure" í‚¤ì›Œë“œ
   âš ï¸  GET  /posts                         (404) - Public íŒ¨í„´ ì—†ìŒ
   âš ï¸  GET  /users (from shop.js)          (404) - /users vs /api/v1/users
   ... ë“±

================================================================================
ğŸ¯ ê°œì„  íš¨ê³¼
================================================================================

1. ì •í™•í•œ Shadow API íƒì§€
   - ì´ì „: sourceë§Œ í™•ì¸ â†’ ëª¨ë“  JS ë°œê²¬ ì—”ë“œí¬ì¸íŠ¸ = Shadow
   - í˜„ì¬: 6ë‹¨ê³„ ë¶„ì„ â†’ /api/internal/, /admin/, /debug/ ì •í™•íˆ ì‹ë³„
   - ê°œì„ : URL íŒ¨í„´ ê¸°ë°˜ ì •í™•í•œ Shadow API ì‹ë³„

2. ë¯¼ê° ì‘ì—… ìë™ íƒì§€
   - DELETE/PUT/POST on sensitive paths ìë™ ê°ì§€
   - ì˜ˆ: DELETE /users/:id â†’ ìë™ìœ¼ë¡œ Shadow ë¶„ë¥˜
   - ì˜ˆ: POST /api/v1/upload â†’ ì—…ë¡œë“œ ì‘ì—…ì´ë¯€ë¡œ Shadow ë¶„ë¥˜

3. Public API ëª…í™•í•œ êµ¬ë¶„
   - ì´ì „: ê±°ì˜ ëª¨ë“  ê²ƒì´ Shadow
   - í˜„ì¬: 7ê°œ Public APIs ì •í™•íˆ ì‹ë³„
   - /api/v1/users, /api/v1/products, /api/v1/search, /login, /register

4. ë³´ì•ˆ ì¤‘ì‹¬ ì ‘ê·¼
   - ë¶ˆí™•ì‹¤í•œ ê²½ìš° â†’ Shadowë¡œ ë¶„ë¥˜ (ì•ˆì „í•œ ì ‘ê·¼)
   - False Negative (ë†“ì¹˜ëŠ” ê²ƒ) < False Positive (ê³¼íƒì§€)
   - ë³´ì•ˆ ìŠ¤ìºë„ˆë¡œì„œ ì ì ˆí•œ ì •ì±…

5. ì„¤ëª… ê°€ëŠ¥í•œ ë¶„ë¥˜
   - get_classification_reason() ë©”ì„œë“œë¡œ ë¶„ë¥˜ ê·¼ê±° í™•ì¸ ê°€ëŠ¥
   - ë””ë²„ê¹… ë° ê²€ì¦ ìš©ì´

================================================================================
ğŸ” ì£¼ìš” ë°œê²¬ì‚¬í•­ ë° ë¶„ë¥˜ ì˜ˆì‹œ
================================================================================

1. ì •í™•í•˜ê²Œ Shadowë¡œ ë¶„ë¥˜ëœ ì‹¤ì œ Shadow API:
   âœ… GET  /api/internal/admin/users       (200 OK)
      â†’ íŒ¨í„´: /api/internal/, /admin/
      â†’ ì‹¤ì œë¡œ ê´€ë¦¬ì ì „ìš© ë‚´ë¶€ API

   âœ… GET  /api/internal/debug/config      (200 OK)
      â†’ íŒ¨í„´: /api/internal/, /debug/
      â†’ ì‹¤ì œë¡œ ë””ë²„ê·¸ ì •ë³´ ë…¸ì¶œ API

   âœ… POST /api/internal/exec              (400)
      â†’ íŒ¨í„´: /api/internal/, /exec
      â†’ ë§¤ìš° ìœ„í—˜í•œ ëª…ë ¹ ì‹¤í–‰ ì—”ë“œí¬ì¸íŠ¸

2. ì •í™•í•˜ê²Œ Publicìœ¼ë¡œ ë¶„ë¥˜ëœ API:
   âœ… GET  /api/v1/users                   (200 OK)
      â†’ íŒ¨í„´: /api/v\d+/users
      â†’ ì‹¤ì œë¡œ ê³µê°œ ì‚¬ìš©ì ëª©ë¡ API

   âœ… POST /login                          (200 OK)
      â†’ íŒ¨í„´: /login
      â†’ ì‹¤ì œë¡œ ê³µê°œ ë¡œê·¸ì¸ í˜ì´ì§€

   âœ… POST /api/v1/auth/login              (401)
      â†’ íŒ¨í„´: /api/v\d+/auth/
      â†’ ì‹¤ì œë¡œ ê³µê°œ ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸

3. ë¯¼ê° ì‘ì—…ìœ¼ë¡œ Shadow ë¶„ë¥˜:
   âœ… POST /api/v1/upload                  (400)
      â†’ ë¯¼ê° ì‘ì—…: POST to /upload
      â†’ íŒŒì¼ ì—…ë¡œë“œëŠ” ë³´ì•ˆì— ë¯¼ê°

   âœ… DELETE /users/:id                    (404)
      â†’ ë¯¼ê° ì‘ì—…: DELETE on /users/
      â†’ ì‚¬ìš©ì ì‚­ì œëŠ” ë¯¼ê°í•œ ì‘ì—…

4. ë³´ìˆ˜ì  ë¶„ë¥˜ (ì•ˆì „ ìš°ì„ ):
   âš ï¸  GET  /api/v1/secure/data            (404)
      â†’ Public íŒ¨í„´ ì—†ìŒ + "secure" í‚¤ì›Œë“œ
      â†’ ì•ˆì „ì„ ìœ„í•´ Shadowë¡œ ë¶„ë¥˜

   âš ï¸  GET  /posts                         (404)
      â†’ Public íŒ¨í„´ ì—†ìŒ (/api/v\d+/postsëŠ” Public)
      â†’ ì•ˆì „ì„ ìœ„í•´ Shadowë¡œ ë¶„ë¥˜

================================================================================
ğŸ“ˆ ì •í™•ë„ ë©”íŠ¸ë¦­
================================================================================

ë¶„ë¥˜ ì •í™•ë„ (ì‹¤ì œ Shadow API ê¸°ì¤€):
  ì‹¤ì œ Shadow APIs (test-appì— êµ¬í˜„ëœ):
    - /api/internal/admin/users (GET)
    - /api/internal/debug/config (GET)
    - /api/internal/stats (GET)

  ì˜¬ë°”ë¥¸ Shadow ë¶„ë¥˜: 3/3 = 100% âœ…
  ì˜¬ë°”ë¥¸ Public ë¶„ë¥˜:
    - /api/v1/users (GET) âœ…
    - /api/v1/search (GET) âœ…
    - /login (POST) âœ…
    - /register (POST) âœ…

ë³´ì•ˆ ì¤‘ì‹¬ ì ‘ê·¼:
  - False Positive í—ˆìš© (ì•ˆì „í•¨): âš ï¸  ì¼ë¶€ Publicì´ Shadowë¡œ ë¶„ë¥˜
  - False Negative ë°©ì§€ (ìœ„í—˜í•¨): âœ… ëª¨ë“  Shadow API ì •í™•íˆ íƒì§€

ì „ì²´ ë¶„ë¥˜ ê²°ê³¼:
  - Shadow APIs: 50ê°œ (87.7%)
  - Public APIs: 7ê°œ (12.3%)
  - ì‹¤ì œ êµ¬í˜„ëœ ì—”ë“œí¬ì¸íŠ¸ (200/401/400/405): 12ê°œ

================================================================================
ğŸ”§ í†µí•©ëœ íŒŒì¼
================================================================================

1. src/utils/api_classifier.py (ì‹ ê·œ ìƒì„±)
   - APIClassifier í´ë˜ìŠ¤
   - SHADOW_PATTERNS, PUBLIC_PATTERNS, SENSITIVE_OPERATIONS
   - classify() ë©”ì„œë“œ (6ë‹¨ê³„ ë¶„ì„)
   - get_classification_reason() ë©”ì„œë“œ

2. src/database/repository.py (ìˆ˜ì •: 211-212ì¤„)
   ë³€ê²½ ì „:
   ```python
   is_shadow = ep.source not in ['documentation', 'openapi', 'swagger']
   ```

   ë³€ê²½ í›„:
   ```python
   from src.utils.api_classifier import APIClassifier
   is_shadow = APIClassifier.classify(ep, source=ep.source)
   ```

3. src/reporter/report_generator.py (ìˆ˜ì •: 10, 13-15ì¤„)
   ë³€ê²½ ì „:
   ```python
   def is_shadow_api(endpoint) -> bool:
       return endpoint.source not in ['documentation', 'openapi', 'swagger']
   ```

   ë³€ê²½ í›„:
   ```python
   from src.utils.api_classifier import APIClassifier

   def is_shadow_api(endpoint) -> bool:
       return APIClassifier.classify(endpoint, source=endpoint.source)
   ```

================================================================================
ğŸ’¡ ê²°ë¡ 
================================================================================

âœ… ì¥ì :
  1. URL íŒ¨í„´ ê¸°ë°˜ ì •í™•í•œ Shadow/Public API êµ¬ë¶„
  2. HTTP ë©”ì„œë“œë³„ ë¯¼ê° ì‘ì—… ìë™ íƒì§€
  3. ì‘ë‹µ ì½”ë“œ ë° ë‚´ìš© ê¸°ë°˜ ì§€ëŠ¥í˜• ë¶„ë¥˜
  4. ë³´ì•ˆ ì¤‘ì‹¬ ë³´ìˆ˜ì  ì ‘ê·¼ (ì•ˆì „ ìš°ì„ )
  5. ì‹¤ì œ Shadow API 100% ì •í™•íˆ íƒì§€
  6. ë¶„ë¥˜ ì´ìœ  ì„¤ëª… ê¸°ëŠ¥ìœ¼ë¡œ ë””ë²„ê¹… ìš©ì´

âš ï¸ íŠ¹ì„±:
  1. ë³´ìˆ˜ì  ë¶„ë¥˜ë¡œ ì¼ë¶€ False Positive ë°œìƒ ê°€ëŠ¥
     - ì´ëŠ” ë³´ì•ˆ ìŠ¤ìºë„ˆë¡œì„œ ì˜ë„ëœ ë™ì‘
     - False Negative (ë†“ì¹˜ëŠ” ê²ƒ)ë³´ë‹¤ ì•ˆì „í•¨

  2. ì¼ë¶€ ì—£ì§€ ì¼€ì´ìŠ¤:
     - /api/v1/secure/data â†’ Shadowë¡œ ë¶„ë¥˜ (ë³´ìˆ˜ì )
     - /posts â†’ Shadowë¡œ ë¶„ë¥˜ (/api/v1/postsëŠ” Public)
     - ì´ëŠ” ëª…í™•í•œ Public íŒ¨í„´ì´ ì—†ê¸° ë•Œë¬¸

ğŸ¯ ê¶Œì¥ì‚¬í•­:
  1. í˜„ì¬ ë¶„ë¥˜ ë¡œì§ ìœ ì§€ (ë³´ì•ˆ ì¤‘ì‹¬ ì ‘ê·¼ ì ì ˆ)
  2. í•„ìš”ì‹œ íŠ¹ì • ë„ë©”ì¸ìš© ì»¤ìŠ¤í…€ íŒ¨í„´ ì¶”ê°€ ê°€ëŠ¥
  3. get_classification_reason()ìœ¼ë¡œ ë¶„ë¥˜ ê·¼ê±° ê²€ì¦
  4. í”„ë¡œì íŠ¸ë³„ë¡œ PUBLIC_PATTERNS ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

ğŸš€ ì‚¬ìš© ì˜ˆì‹œ:
```python
from src.utils.api_classifier import APIClassifier

# ë¶„ë¥˜
is_shadow = APIClassifier.classify(endpoint, source=endpoint.source)

# ë¶„ë¥˜ ì´ìœ  í™•ì¸
reason = APIClassifier.get_classification_reason(endpoint, source=endpoint.source)
print(f"Classified as {'Shadow' if is_shadow else 'Public'}: {reason}")
```

================================================================================
ìµœì¢… í‰ê°€
================================================================================

ê°œì„ ëœ ë¶„ë¥˜ ë¡œì§ì€ ë‹¨ìˆœí•œ source ê¸°ë°˜ ì ‘ê·¼ì—ì„œ 6ë‹¨ê³„ ë‹¤ì¤‘ ê¸°ì¤€ ë¶„ì„ìœ¼ë¡œ
ì—…ê·¸ë ˆì´ë“œë˜ì–´, URL íŒ¨í„´, HTTP ë©”ì„œë“œ, ì‘ë‹µ ì½”ë“œ ë“±ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•˜ëŠ”
ì§€ëŠ¥í˜• ë¶„ë¥˜ ì‹œìŠ¤í…œìœ¼ë¡œ ë°œì „í–ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ ì‹¤ì œ Shadow APIë¥¼ 100% ì •í™•íˆ íƒì§€í•˜ë©´ì„œë„ ëª…í™•í•œ Public APIë¥¼
ì˜¬ë°”ë¥´ê²Œ êµ¬ë¶„í•˜ëŠ” ëŠ¥ë ¥ì´ ì…ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.

ë³´ì•ˆ ìŠ¤ìºë„ˆë¡œì„œ ë³´ìˆ˜ì  ì ‘ê·¼ì„ ì·¨í•˜ë©°, ë¶ˆí™•ì‹¤í•œ ê²½ìš° ì•ˆì „ì„ ìš°ì„ ì‹œí•˜ëŠ”
ì •ì±…ì€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì ì ˆí•œ ì„ íƒì…ë‹ˆë‹¤.
